>##### Дисклеймер!

>Статья расчитана не тех,кто уже знает, что такое импорт, классы и модули.

>Предполагается, что  Kivy уже установлен.

## Мир вашему дому!

В этой статье я расскажу вам о *быстром и легком* создании GUI с помощью Kivy.


### Поехали!
Любое приложение Kivy состоит минимум из одного файла — основного скрипта.
Минимальный скрипт выглядит так:
```python
from kivy.app import App
from kivy.uix.boxlayout import BoxLayout

class Root(BoxLayout):
	pass
		
class ExampleApp(App):
	def build(self):
	        return Root()

ExampleApp().run()
```
При запуске скрипта вы увидите черное окно, что будет означать, что приложение работает. Самая важная строка здесь - класс *ExampleApp*, который и есть наше приложение. 

Запуск kivy-приложения начинается с команды *ExampleApp().run()*.

### Привет, мир!

Чтобы процесс разработки превращался почти в чистое творчество и описание идей, авторы снабдили фреймворк собственным языком разметки.

Чтобы использовать разметку нам нужен файл с расширением kv. Имя этого файла должно совпадать с именем класса приложения, для которого и создается разметка. В нашем случае, если класс называется _ExampleApp_, то файл разметки должен называться _example.kv_ (регистр можно не соблюдать)
Итак, создайте рядом со скриптом файл example.kv и напишите в нём следующее:
```
<Root>:
    Label:
        text:'Привет, мир!'
```        
А теперь запускаем скрипт и читаем наш «привет» в центре черного окна.
Логика kv проста: указываешь виджет, а затем описываешь свойства виджета.
Свойства и методы конкретного виджета доступны в документации в разделе API. 

>##### Важно!
>Kv строит иерархию элементов через отступы. как Python, поэтому не смешиваайте  в одном документе отступы через пробелы с табуляцией. Рекомендуется делать 4 пробела на каждый новый уровень дерева.

Построение интерфейса всегда начинается с обращения к корневому виджету. Видите имя в фигурных скобках — это корневой виджет. (Из этого правила есть исключения, но об этом - в другой статье). Здесь мы помещаем на корневой виджет объект Label и задаем текст лейбла. 

Конечно, Kivy позволяет добавлять виджеты по-старинке,то бишь в скрипте, через функции. У этого способа есть 
свои преимущества, о которых будет сказано в следующих статьях.
Однако, каждый виджет - это отдельный класс,который надо будет импортировать и объявить.
Разметка же делает всё это за нас. 
И если понадобится много и *разных*(а их в Kivy действительно много!) элементов, то не воспользоваться разметкой будет глупой идеей.


### Добавляем интерактив

Допустим, теперь мы хотим, чтобы программа писала «Привет, %user_name% !».
Как уже сказано, логика kv проста: пиши виджет, а потом свойства.
Для начала, нужно, чтобы пользователь увидел приглашение к вводу текста. Для этого открываем example.kv и добавляем новую надпись:
```
<Root>:
    Label:
        text:'Введите своё имя'
    Label:
        text:'Привет, мир!'
```
Запускаем скрипт и видим, что надписи расположились друг за другом по горизонтали. Непривычно, исправляем. Root — это тоже виджет, а значит под именем виджета можно указывать не только дочерние элементы, но и свойства самого виджета.
Одно из главных свойств виджета BoxLayout — ориентация содержимого. Поэтому:
```
<Root>:
    orientation:'vertical'
    …
```    
Теперь добавим ввод текста:
```
<Root>:
    orientation:'vertical'
    Label:
        text:'Введите своё имя'
    TextInput:
    Label:
        text:'Привет, мир!'
```
Итак, теперь мы можем вводить текст,но это ничего не меняет. Чтобы текст из формы попал на второй лейбл, мы должны присвоить форме идентификатор.  Идентификатор — значение поля id. Назначать id можно всем без исключения элементам в kv:
```
...
TextInput:
    id: form
...
```
Отныне форма отзывается на идентификатор _form_.
Теперь, когда нам нужен текст из формы, то достаточно написать ее индентификатор, а потом вызвать свойство text:
```
...
Label:
    text: form.text
…
```
Запускаем и видим, что всё, что вводится в форму, тут же появляется в поле ниже. Но и это ещё не всё.

Kv — не простой язык разметки. Например, он может обрабатывать строки, как это делает сам Python:
```	
...
Label:
    text:'Привет, '+form.text+'!'
...    
```

### Больше контроля

А теперь мы хотим, чтобы надпись менялась не в момент ввода, а, например, по нажатию кнопки. Чтобы обратиться к надписи и изменить ее текст, ей тоже нужно присвоить идентификатор.
```
Label:
    id:field
    text:'Привет, '+form.text+'!'
```
Добавляем кнопку:
```
...
Label:
    text:'Привет, '+form.text+'!'
Button:
    text: 'OK'
...    
```
Чтобы задать поведение кнопки, включаем событие(on_press) для кнопки и реакцию на него.
Полный список стандартных событий виджета можно узнать, заглянув опять же в документацию,
в API классов Kivy.

```
...
Button:
     text: 'OK'
     on_press:
        field.text = 'Привет, '+form.text+'!'
...
```

> ##### Запомните!
>Чтобы передать значение в какое-то поле,находясь внутри события или свойства, надо использовать операцию присваивания «=» , а не двоеточие:
```
on_press:
	field.text = 'Привет, '+form.text+'!'
```

Вернемся же к файлу example.kv. Теперь он выглядит так:
```
<Root>:
    orientation:'vertical'
    Label:
        text:'Введите своё имя'
    TextInput:
        id:form
    Label:
        id:field
    Button:
        text: 'OK'
        on_press:
            field.text = 'Привет, '+form.text+'!'
```
Всё! Наше маленькое приложение готово. Можем им пользоваться.

### Финал
Конечно, это малая часть того, что можно рассказать о фреймворке. 
Здесь не затронуты такие вопросы как форматирование текста, 
внешний вид элементов, их взаимное расположение, да и сама библиотека элементов,
но, думаю, того что было в статье достаточно, чтобы показать, 
что разработка на Kivy — это легко и интересно. 

Чуть больше о возможностях Kivy в этой [статье](https://github.com/Hateman31/Kivy-magazine-ru/blob/master/tricks_1.md)

Читайте документацию, смотрите */examples* в [репозитарии Kivy](http://github.com/kivy.)

Добавляйтесь в [сообщество](http:/vk.com/kivy_ru).
И до новых встреч в следующих статьях!
